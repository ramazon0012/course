{% extends "base.html" %} 

{% block title %}Order{% endblock title %}

{% block content %} 
<section class="pt-5 pb-9">
  <div class="container-small cart">
    <nav class="mb-2" aria-label="breadcrumb">
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item">
          <a href="#!">Page 1</a>
        </li>
        <li class="breadcrumb-item">
          <a href="#!">Page 2</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">Default</li>
      </ol>
    </nav>
    <h2 class="mb-5">Check out</h2>
    <div class="row">
      <div class="col-lg-7 mb-4 mb-lg-0">
        <form method="post" id="orderForm">
          <div class="row g-4">
            <div class="col-12">
              <label
                class="form-label fs-8 text-body-highlight ps-0 text-transform-none"
                for="inputName"
                >Full name</label
              >
              {% csrf_token %}
              {{ form.first_name }}
            </div>
            <div class="col-md-6">
              <label
                class="form-label fs-8 text-body-highlight ps-0 text-transform-none"
                for="inputEmail"
                >Email</label
              >
              {% csrf_token %}
              {{ form.email }}
            </div>
            <div class="col-12">
              <label
                class="form-label fs-8 text-body-highlight ps-0 text-transform-none"
                for="inputAddress1"
                >Last name</label
              >
              {% csrf_token %}
              {{ form.last_name }}
            </div>
            <div class="col-12">
              <label
                class="form-label fs-8 text-body-highlight ps-0 text-transform-none"
                for="inputAddress2"
                >Address</label
              >
              {% csrf_token %}
              {{ form.address }}
            </div>
            <div class="col-md-4">
              <label
                class="form-label fs-8 text-body-highlight ps-0 text-transform-none"
                for="inputCity"
                >City</label
              >
              {% csrf_token %}
              {{ form.city }}
            </div>
            <div class="col-md-4">
              <label
                class="form-label fs-8 text-body-highlight ps-0 text-transform-none"
                for="inputZipCode"
                >Zip code</label
              >
              {% csrf_token %}
              {{ form.postal_code }}
            </div>
            <div class="col-md-4">
              {% csrf_token %}
              {{ form.paid }}
            </div>
            <div class="col-md-4">
              <label
                class="form-label fs-8 text-body-highlight ps-0 text-transform-none"
                for="paid"
                >Delivery</label
              >
              {% csrf_token %}
              {{ form.delivery }}
            </div>
            <div class="col-md-4">
              <label
                class="form-label fs-8 text-body-highlight ps-0 text-transform-none"
                for="paid"
                >Status</label
              >
              {% csrf_token %}
              {{ form.status }}
            </div>
            <div class="col-12">
              <button class="btn btn-primary px-8 px-sm-11 me-2" type="submit">
                Save
              </button>
              <button
                class="btn btn-phoenix-secondary text-nowrap"
                type="submit"
              >
                Exit Without Saving
              </button>
            </div>
          </div>
        </form>
      </div>
      <div class="col-lg-5 col-xl-4 offset-xl-1">
        <div class="card mt-3 mt-lg-0">
          <div class="card-body">
            <div class="d-flex align-items-center justify-content-between">
              <h3 class="mb-0">Summary</h3>
              <a href="/cart/">
                <button class="btn btn-link pe-0" type="button">Edit cart</button>
              </a>
            </div>
            <div class="border-dashed border-bottom border-translucent mt-4">
              <div class="ms-n2">
                {% for item in cart %} {% with product=item.product %}
                <div class="row align-items-center mb-2 g-3">
                  <div class="col-8 col-md-7 col-lg-8">
                    <div class="d-flex align-items-center">
                      <img
                        class="me-2 ms-1"
                        src="{{product.image.url}}"
                        width="40"
                        alt=""
                      />
                      <h6 class="fw-semibold text-body-highlight lh-base">
                        {{ product.name }}
                      </h6>
                    </div>
                  </div>
                  <div class="col-2 col-md-3 col-lg-2">
                    <h6 class="fs-10 mb-0">x{{ item.quantity }}</h6>
                  </div>
                  <div class="col-2 ps-0">
                    <h5 class="mb-0 fw-semibold text-end">${{ product.price|floatformat:0 }}</h5>
                  </div>
                </div>
                {% endwith %} 
                {% endfor %}
              </div>
            </div>
            <div class="d-flex justify-content-between border-dashed-y pt-3">
              <h4 class="mb-0">Total :</h4>
              <h4 class="mb-0">${{ cart.get_total_price }}</h4>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- end of .container-->
</section>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.getElementById('orderForm').addEventListener('submit', function (event) {
      // Prevent the default form submission behavior
      event.preventDefault();

      // Perform additional actions if needed before displaying the alert

      // Display the alert
      alert('Your order has been successfully completed. Your order number is {{order.id}}');

      // Submit the form
      this.submit();
    });
  });
</script>
{% endblock %}
